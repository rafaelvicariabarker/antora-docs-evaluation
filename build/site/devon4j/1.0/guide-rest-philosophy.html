<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: devonfw Documentation</title>
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">devonfw Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="devon4j" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Devon4j</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Documentation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture.html">Architecture Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-domain-layer.html">Domain Layer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-logic-layer.html">Logic Layer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-service-layer.html">Service Layer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-batch-layer.html">Batch Layer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-client-layer.html">Client Layer (GUI)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Coding</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="coding-conventions.html">Coding Conventions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="coding-tools.html">Development Tools</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-dependency-injection.html">Bean Dependency Injection</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-exceptions.html">Exception Handling</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-i18n.html">Internationalization (I18N)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-transferobject.html">Transferobjects</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-beanmapping.html">Bean-Mapping</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-datatype.html">Datatypes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-xml.html">XML</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-json.html">JSON</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-rest.html">REST</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-soap.html">SOAP</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-service-client.html">Service Client</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-kafka.html">Kafka</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-validation.html">Validation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-security.html">Security</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-access-control.html">Access Control</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-testing.html">Testing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-transactions.html">Transaction Handling</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-aop.html">AOP</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-jpa.html">JPA</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-repository.html">Repository</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-dao.html">DAO</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-jpa-query.html">Queries</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-jpa-performance.html">JPA Performance</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-auditing.html">Auditing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-database-migration.html">Database Migration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-accessibility.html">Accessibility</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-caching.html">Caching</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-cors-support.html">CORS support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-blob-support.html">BLOB support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-sql.html">SQL</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="guide-apm.html">Application Performance Management</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Devon4j</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">Devon4j</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/rafaelvicariabarker/devon4j/edit/master/modules/ROOT/pages/guide-rest-philosophy.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_rest_philosophy">REST Philosophy</a></li>
<li><a href="#_metadata">Metadata</a></li>
<li><a href="#_recommendations_for_rest_requests_and_responses">Recommendations for REST requests and responses</a>
<ul class="sectlevel2">
<li><a href="#_unparameterized_loading_of_a_single_resource">Unparameterized loading of a single resource</a></li>
<li><a href="#_unparameterized_loading_of_a_collection_of_resources">Unparameterized loading of a collection of resources</a></li>
<li><a href="#_saving_a_resource">Saving a resource</a></li>
<li><a href="#_parameterized_loading_of_a_resource">Parameterized loading of a resource</a></li>
<li><a href="#_deletion_of_a_resource">Deletion of a resource</a></li>
<li><a href="#_error_results">Error results</a></li>
</ul>
</li>
<li><a href="#_rest_media_types">REST Media Types</a></li>
<li><a href="#_rest_testing">REST Testing</a></li>
<li><a href="#_security">Security</a>
<ul class="sectlevel2">
<li><a href="#_csrf">CSRF</a></li>
<li><a href="#_json_top_level_arrays">JSON top-level arrays</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="_rest_philosophy"><a class="anchor" href="#_rest_philosophy"></a>REST Philosophy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST and RESTful often implies very strict and specific rules and conventions.
However different people will often have different opinions of such rules.
We learned that this leads to "religious discussions" (starting from <code>PUT</code> vs. <code>POST</code> and IDs in path vs. payload up to Hypermedia and <a href="https://en.wikipedia.org/wiki/HATEOAS">HATEOAS</a>).
These "religious discussions" waste a lot of time and money without adding real value in case of common business applications (if you publish your API on the internet to billions of users this is a different story).
Therefore we give best practices that lead to simple, easy and pragmatic "HTTP APIs" (to avoid the term "REST services" and end "religious discussions").
Please also note that we do not want to assault anybody nor force anyone to follow our guidelines.
This guide is just an option for people who want to be pragmatic and face such "religious discussions".
Please read the following best practices carefully and be aware that they might slightly differ from what your first hit on the web will say about REST (see e.g. <a href="http://restcookbook.com/">RESTful cookbook</a>).</p>
</div>
<div class="paragraph">
<p>If you want to provide an entity with a different structure do not append further details to an element URL but create a separate collection URL as base.
So use <code>https://mydomain.com/myapp/services/rest/mycomponent/v1/myentity-with-details/42</code> instead of <code>https://mydomain.com/myapp/services/rest/mycomponent/v1/myentity/42/with-details</code>.
For offering a <a href="guide-transferobject.html#CTO" class="xref page">CTO</a> simply append <code>-cto</code> to the collection URL (e.g. <code>&#8230;&#8203;/myentity-cto/</code>).</p>
</div>
<div class="paragraph">
<p>While REST was designed as a pragmatical approach it sometimes leads to "religious discussions" e.g. about using <code>PUT</code> vs. <code>POST</code> (see ATTENTION notice above).
As the devonfw has a strong focus on usual business applications it proposes a more "pragmatic" approach to REST services.</p>
</div>
<div class="paragraph">
<p>On the next table we compare the main differences between the "canonical" REST approach (or RESTful) and the devonfw proposal.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Usage of HTTP methods</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>HTTP Method</strong></th>
<th class="tableblock halign-left valign-top"><strong>RESTful Meaning</strong></th>
<th class="tableblock halign-left valign-top"><strong>devonfw</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read single element.</p>
<p class="tableblock">Search on an entity (with parametrized url)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read a single element.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replace entity data.</p>
<p class="tableblock">Replace entire collection (typically not supported)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a new element in the collection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create or update an element in the collection.</p>
<p class="tableblock">Search on an entity (parametrized post body)</p>
<p class="tableblock">Bulk deletion.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DELETE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete an entity.</p>
<p class="tableblock">Delete an entire collection (typically not supported)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete an entity.</p>
<p class="tableblock">Delete an entire collection (typically not supported)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Please consider these guidelines and rationales:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We use <code>POST</code> on the collection URL to save an entity (<code>create</code> if no ID provided in payload otherwise <code>update</code>). This avoids pointless discussions in distinctions between <code>PUT</code> and <code>POST</code> and what to do if a <code>create</code> contains an ID in the payload or if an <code>update</code> is missing the ID property or contains a different ID in payload than in URL.</p>
</li>
<li>
<p>Hence, we do NOT use <code>PUT</code> but always use <code>POST</code> for write operations. As we always have a technical ID for each entity, we can simply distinguish create and update by the presence of the ID property.</p>
</li>
<li>
<p>Please also note that for (large) bulk deletions you may be forced to used <code>POST</code> instead of <code>DELETE</code> as according to the HTTP standard <code>DELETE</code> must not have payload and URLs are limited in length.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_metadata"><a class="anchor" href="#_metadata"></a>Metadata</h2>
<div class="sectionbody">
<div class="paragraph">
<p>devonfw has support for the following metadata in REST service invocations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Further information</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">X-Correlation-Id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP header for a <em>correlation ID</em> that is a unique identifier to associate different requests belonging to the same session / action</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="guide-logging.html" class="xref page">Logging guide</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validation errors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standardized format for a service to communicate validation errors to the client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server-side validation is documented in the <a href="guide-validation.html" class="xref page">Validation guide</a>.</p>
<p class="tableblock">The protocol to communicate these validation errors is described in <a href="#rest-exception-handling">REST exception handling</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pagination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standardized format for a service to offer paginated access to a list of entities</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server-side support for pagination is documented in the <a href="guide-repository.html#pagination" class="xref page">Repository Guide</a>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_recommendations_for_rest_requests_and_responses"><a class="anchor" href="#_recommendations_for_rest_requests_and_responses"></a>Recommendations for REST requests and responses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The devonfw proposes, for simplicity, a deviation from the common REST pattern:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using <code>POST</code> for updates (instead of <code>PUT</code>)</p>
</li>
<li>
<p>Using the payload for addressing resources on POST (instead of identifier on the <code>URL</code>)</p>
</li>
<li>
<p>Using parametrized <code>POST</code> for searches</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This use of REST will lead to simpler code both on client and on server. We discuss this use on the next points.</p>
</div>
<div class="paragraph">
<p>The following table specifies how to use the HTTP methods (verbs) for collection and element URIs properly (see <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer#Applied_to_web_services">wikipedia</a>).</p>
</div>
<div class="sect2">
<h3 id="_unparameterized_loading_of_a_single_resource"><a class="anchor" href="#_unparameterized_loading_of_a_single_resource"></a>Unparameterized loading of a single resource</h3>
<div class="ulist">
<ul>
<li>
<p><strong>HTTP Method</strong>: <code>GET</code></p>
</li>
<li>
<p><strong>URL example</strong>: <code>/services/rest/productmanagement/v1/product/123</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For loading of a single resource, embed the <code>identifier</code> (e.g. <code>123</code>) of the resource in the URL.</p>
</div>
<div class="paragraph">
<p>The response contains the resource in JSON format, using a JSON object at the top-level, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
  "id": 123,
  "name": "Steak",
  "color": "brown"
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_unparameterized_loading_of_a_collection_of_resources"><a class="anchor" href="#_unparameterized_loading_of_a_collection_of_resources"></a>Unparameterized loading of a collection of resources</h3>
<div class="ulist">
<ul>
<li>
<p><strong>HTTP Method</strong>: <code>GET</code></p>
</li>
<li>
<p><strong>URL example</strong>: <code>/services/rest/productmanagement/v1/product</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For loading of a collection of resources, make sure that the size of the collection can never exceed a reasonable maximum size. For parameterized loading (searching, pagination), see below.</p>
</div>
<div class="paragraph">
<p>The response contains the collection in JSON format, using a JSON object at the top-level, and the actual collection underneath a <code>result</code> key, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
  "result": [
    {
      "id": 123,
      "name": "Steak",
      "color": "brown"
    },
    {
      "id": 124,
      "name": "Broccoli",
      "color": "green"
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_saving_a_resource"><a class="anchor" href="#_saving_a_resource"></a>Saving a resource</h3>
<div class="ulist">
<ul>
<li>
<p><strong>HTTP Method</strong>: <code>POST</code></p>
</li>
<li>
<p><strong>URL example</strong>: <code>/services/rest/productmanagement/v1/product</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The resource will be passed via JSON in the request body. If updating an existing resource, include the resource&#8217;s <code>identifier</code> in the JSON and not in the URL, in order to avoid ambiguity.</p>
</div>
<div class="paragraph">
<p>If saving was successful, the updated product (e.g. with assigned ID or updated modification counter) is returned.</p>
</div>
<div class="paragraph">
<p>If saving was unsuccessful, refer below for the format to return errors to the client.</p>
</div>
</div>
<div class="sect2">
<h3 id="_parameterized_loading_of_a_resource"><a class="anchor" href="#_parameterized_loading_of_a_resource"></a>Parameterized loading of a resource</h3>
<div class="ulist">
<ul>
<li>
<p><strong>HTTP Method</strong>: <code>POST</code></p>
</li>
<li>
<p><strong>URL example</strong>: <code>/services/rest/productmanagement/v1/product/search</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to differentiate from an unparameterized load, a special <em>subpath</em> (for example <code>search</code>) is introduced. The parameters are passed via JSON in the request body. An example of a simple, paginated search would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
  "status": "OPEN",
  "pagination": {
    "page": 2,
    "size": 25
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response contains the requested page of the collection in JSON format, using a JSON object at the top-level, the actual page underneath a <code>result</code> key, and additional pagination information underneath a <code>pagination</code> key, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
  "pagination": {
    "page": 2,
    "size": 25,
    "total": null
  },
  "result": [
    {
      "id": 123,
      "name": "Steak",
      "color": "brown"
    },
    {
      "id": 124,
      "name": "Broccoli",
      "color": "green"
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Compare the code needed on server side to accept this request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  @Path("/category/search")
  @POST
  public PaginatedListTo&lt;CategoryEto&gt; findCategorysByPost(CategorySearchCriteriaTo searchCriteriaTo) {
    return this.dishmanagement.findCategoryEtos(searchCriteriaTo);
 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the equivalent code required if doing it the RESTful way by issuing a <code>GET</code> request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"> @Path("/category/search")
  @POST @Path("/order")
  @GET
  public PaginatedListTo&lt;CategoryEto&gt; findCategorysByPost( @Context UriInfo info) {

    RequestParameters parameters = RequestParameters.fromQuery(info);
    CategorySearchCriteriaTo criteria = new CategorySearchCriteriaTo();
    criteria.setName(parameters.get("name", Long.class, false));
    criteria.setDescription(parameters.get("description", OrderState.class, false));
    criteria.setShowOrder(parameters.get("showOrder", OrderState.class, false));
    return this.dishmanagement.findCategoryEtos(criteria);

  }</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_pagination_details"><a class="anchor" href="#_pagination_details"></a>Pagination details</h4>
<div class="paragraph">
<p>The client can choose to request a count of the total size of the collection, for example to calculate the total number of available pages. It does so, by specifying the <code>pagination.total</code> property with a value of <code>true</code>.</p>
</div>
<div class="paragraph">
<p>The service is free to honour this request. If it chooses to do so, it returns the total count as the <code>pagination.total</code> property in the response.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deletion_of_a_resource"><a class="anchor" href="#_deletion_of_a_resource"></a>Deletion of a resource</h3>
<div class="ulist">
<ul>
<li>
<p><strong>HTTP Method</strong>: <code>DELETE</code></p>
</li>
<li>
<p><strong>URL example</strong>: <code>/services/rest/productmanagement/v1/product/123</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For deletion of a single resource, embed the <code>identifier</code> of the resource in the URL.</p>
</div>
</div>
<div class="sect2">
<h3 id="_error_results"><a class="anchor" href="#_error_results"></a>Error results</h3>
<div class="paragraph">
<p>The general format for returning an error to the client is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
  "message": "A human-readable message describing the error",
  "code": "A code identifying the concrete error",
  "uuid": "An identifier (generally the correlation id) to help identify corresponding requests in logs"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the error is caused by a failed validation of the entity, the above format is extended to also include the list of individual validation errors:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
  "message": "A human-readable message describing the error",
  "code": "A code identifying the concrete error",
  "uuid": "An identifier (generally the correlation id) to help identify corresponding requests in logs",
  "errors": {
    "property failing validation": [
       "First error message on this property",
       "Second error message on this property"
    ],
    // ....
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rest_media_types"><a class="anchor" href="#_rest_media_types"></a>REST Media Types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The payload of a REST service can be in any format as REST by itself does not specify this. The most established ones that the devonfw recommends are <a href="guide-xml.html" class="xref page">XML</a> and <a href="guide-json.html" class="xref page">JSON</a>. Follow these links for further details and guidance how to use them properly. <code>JAX-RS</code> and <code>CXF</code> properly support these formats (<code>MediaType.APPLICATION_JSON</code> and <code>MediaType.APPLICATION_XML</code> can be specified for <code>@Produces</code> or <code>@Consumes</code>). Try to decide for a single format for all services if possible and NEVER mix different formats in a service.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rest_testing"><a class="anchor" href="#_rest_testing"></a>REST Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For testing REST services in general consult the <a href="guide-testing.html" class="xref page">testing guide</a>.</p>
</div>
<div class="paragraph">
<p>For manual testing REST services there are browser plugins:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Firefox: <a href="https://addons.mozilla.org/de/firefox/addon/rested/">rested</a></p>
</li>
<li>
<p>Chrome: <a href="http://www.getpostman.com/">postman</a> (<a href="https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo">advanced-rest-client</a>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security"><a class="anchor" href="#_security"></a>Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Your services are the major entry point to your application. Hence security considerations are important here.</p>
</div>
<div class="sect2">
<h3 id="_csrf"><a class="anchor" href="#_csrf"></a>CSRF</h3>
<div class="paragraph">
<p>A common security threat is <a href="https://www.owasp.org/index.php/Top_10_2013-A8-Cross-Site_Request_Forgery_(CSRF)">CSRF</a> for REST services. Therefore all REST operations that are performing modifications (PUT, POST, DELETE, etc. - all except GET) have to be secured against CSRF attacks. See <a href="guide-csrf.html" class="xref page">CSRF</a> how to do this.</p>
</div>
</div>
<div class="sect2">
<h3 id="_json_top_level_arrays"><a class="anchor" href="#_json_top_level_arrays"></a>JSON top-level arrays</h3>
<div class="paragraph">
<p>OWASP earlier suggested to never return JSON arrays at the top-level, to prevent attacks without rationale.
We digged deep and found <a href="https://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx/">anatomy-of-a-subtle-json-vulnerability</a>.
To sum it up the attack is many years old and does not work in any recent or relevant browser.
Hence it is fine to use arrays as top-level result in a JSON REST service (means you can return <code>List&lt;Foo&gt;</code> in a Java JAX-RS service).</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
