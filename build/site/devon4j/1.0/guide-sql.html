<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: devonfw Documentation</title>
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">^
      <img class="toolbar-logo" src="../../_/img/Logo_devonfw.svg" viewBox="20 0 80 80"
        alt="Devonfw Logo">
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container"  data-component="devon4j" data-version="1.0">
  <div class="panels">
         <div class="nav-trees">
      <div class="version-box">
        <select data-component="cobigen" class="select-version">
            <option value="1.0">
              1.0
            </option>
        </select>
      </div>
        <div data-component="cobigen" data-version="1.0" class="hide">
          <div class="nav-item is-link">
              <button class="nav-item-toggle"></button>
            <a  class="" href="../../cobigen/1.0/index.html">
              Cobigen
            </a>
          </div>
          <div class="nav-children-panel hide">
             
   
     
      <div class="nav-item ">
        <button class="nav-item-toggle"></button>
         
          <span class="">Usage</span>
      </div>
       
        <div class="nav-children-panel hide">
           
   
     
      <div class="nav-item is-link">
        
          
            <a class="spacer" href="https://github.com/devonfw/cobigen/wiki/cobigen-eclipse_usage">Usage of the eclipse UI</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a class="spacer" href="https://github.com/devonfw/cobigen/wiki/cobigen-openapiplugin#usage">OpenAPI Generation</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a class="spacer" href="https://github.com/devonfw/cobigen/wiki/howto_ionic-client-generation">Ionic/Cordova Client Generation</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a class="spacer" href="https://github.com/devonfw/cobigen/wiki/howto_angular-client-generation">Angular Client Generation</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a class="spacer" href="https://github.com/devonfw/cobigen/wiki/cobigen-maven_configuration">Usage in Maven Builds</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a class="spacer" href="https://github.com/devonfw/cobigen/wiki/cobigen-core_configuration">Configuration of the Templates</a>              </div>
                  </div>
     
     
      <div class="nav-item ">
        <button class="nav-item-toggle"></button>
         
          <span class="">Installation</span>
      </div>
       
        <div class="nav-children-panel hide">
           
   
     
      <div class="nav-item is-link">
        
          
            <a class="spacer" href="https://github.com/devonfw/cobigen/wiki/cobigen-eclipse_installation">For eclipse users</a>              </div>
                  </div>
     
     
      <div class="nav-item ">
        <button class="nav-item-toggle"></button>
         
          <span class="">Architecture</span>
      </div>
       
        <div class="nav-children-panel hide">
           
   
     
      <div class="nav-item is-link">
        
          
            <a class="spacer" href="https://github.com/devonfw/cobigen/wiki#architecture">CobiGen is build as an extensible framework for incremental code generation&#8230;&#8203;</a>              </div>
                  </div>
              </div>
        </div>
    </div>
    <div class="nav-trees">
      <div class="version-box">
        <select data-component="devon4j" class="select-version">
            <option value="1.0">
              1.0
            </option>
        </select>
      </div>
        <div data-component="devon4j" data-version="1.0" class="hide">
          <div class="nav-item is-link">
              <button class="nav-item-toggle"></button>
            <a  class="" href="index.html">
              Devon4j
            </a>
          </div>
          <div class="nav-children-panel hide">
             
   
     
      <div class="nav-item ">
        <button class="nav-item-toggle"></button>
         
          <span class="">Documentation</span>
      </div>
       
        <div class="nav-children-panel hide">
           
   
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="architecture.html">Architecture Overview</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-domain-layer.html">Domain Layer</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-logic-layer.html">Logic Layer</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-service-layer.html">Service Layer</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-batch-layer.html">Batch Layer</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-client-layer.html">Client Layer (GUI)</a>              </div>
                  </div>
     
     
      <div class="nav-item ">
        <button class="nav-item-toggle"></button>
         
          <span class="">Coding</span>
      </div>
       
        <div class="nav-children-panel hide">
           
   
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="coding-conventions.html">Coding Conventions</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="coding-tools.html">Development Tools</a>              </div>
                  </div>
     
     
      <div class="nav-item ">
        <button class="nav-item-toggle"></button>
         
          <span class="">Guides</span>
      </div>
       
        <div class="nav-children-panel hide">
           
   
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-dependency-injection.html">Bean Dependency Injection</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-configuration.html">Configuration</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-logging.html">Logging</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-exceptions.html">Exception Handling</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-i18n.html">Internationalization (I18N)</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-transferobject.html">Transferobjects</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-beanmapping.html">Bean-Mapping</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-datatype.html">Datatypes</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-xml.html">XML</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-json.html">JSON</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-rest.html">REST</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-soap.html">SOAP</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-service-client.html">Service Client</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-kafka.html">Kafka</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-validation.html">Validation</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-security.html">Security</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-access-control.html">Access Control</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-testing.html">Testing</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-transactions.html">Transaction Handling</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-aop.html">AOP</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-jpa.html">JPA</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-repository.html">Repository</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-dao.html">DAO</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-jpa-query.html">Queries</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-jpa-performance.html">JPA Performance</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-auditing.html">Auditing</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-database-migration.html">Database Migration</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-accessibility.html">Accessibility</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-caching.html">Caching</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-cors-support.html">CORS support</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-blob-support.html">BLOB support</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer is-current-page" href="guide-sql.html">SQL</a>              </div>
           
     
      <div class="nav-item is-link">
        
          
            <a  class="spacer" href="guide-apm.html">Application Performance Management</a>              </div>
                  </div>
              </div>
        </div>
    </div>
   </div>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Devon4j</a></li>
    <li>Guides</li>
    <li><a href="guide-sql.html">SQL</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/rafaelvicariabarker/devon4j/edit/refactorForAntora/modules/ROOT/pages/guide-sql.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_sql">SQL</a></li>
<li><a href="#_naming_conventions">Naming Conventions</a>
<ul class="sectlevel2">
<li><a href="#_ddl">DDL</a></li>
<li><a href="#_data">Data</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="_sql"><a class="anchor" href="#_sql"></a>SQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For general guides on dealing or avoiding SQL, preventing SQL-injection, etc. you should study <a href="guide-domain-layer.html" class="xref page">domain layer</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_naming_conventions"><a class="anchor" href="#_naming_conventions"></a>Naming Conventions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here we define naming conventions that you should follow whenever you write SQL files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All SQL-Keywords in UPPER CASE</p>
</li>
<li>
<p>Indentation should be 2 spaces as suggested by devonfw for every format.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_ddl"><a class="anchor" href="#_ddl"></a>DDL</h3>
<div class="paragraph">
<p>The naming conventions for database constructs (tables, columns, triggers, constraints, etc.) should be aligned with your database product and their operators.
However, when you have the freedom of choice and a modern case-sensitive database, you can simply use your code conventions also for database constructs to avoid explicitly mapping each and every property (e.g. <code>RestaurantTable</code> vs. <code>RESTAURANT_TABLE</code>).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Define columns and constraints inline in the statement to create the table</p>
</li>
<li>
<p>Indent column types so they all start in the same text column</p>
</li>
<li>
<p>Constraints should be named explicitly (to get a reasonable hint error messages) with:</p>
<div class="ulist">
<ul>
<li>
<p><code>PK_«table»</code> for primary key (name optional here as PK constraint are fundamental)</p>
</li>
<li>
<p><code>FK_«table»_«property»</code> for foreign keys (<code>«table»</code> and <code>«property»</code> are both on the source where the foreign key is defined)</p>
</li>
<li>
<p><code>UC_«table»_«property»[_«propertyN»]*</code> for unique constraints</p>
</li>
<li>
<p><code>CK_«table»_«check»</code> for check constraints (<code>«check»</code> describes the check, if it is defined on a single property it should start with the property).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Old RDBMS had hard limitations for names (e.g. 30 characters). Please note that recent databases have overcome this very low length limitations. However, keep your names short but precise and try to define common abbreviations in your project for according (business) terms. Especially do not just truncate the names at the limit.</p>
</li>
<li>
<p>If possible add comments on table and columns to help DBAs understanding your schema. This is also honored by many tools (not only DBA-tools).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is a brief example of a DDL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">CREATE SEQUENCE HIBERNATE_SEQUENCE START WITH 1000000;

-- *** Table ***
CREATE TABLE RESTAURANT_TABLE (
  ID                   NUMBER(19) NOT NULL,
  MODIFICATION_COUNTER INTEGER NOT NULL,
  SEATS                INTEGER NOT NULL,
  CONSTRAINT PK_TABLE PRIMARY KEY(ID)
);
COMMENT ON TABLE RESTAURANT_TABLE IS 'The physical tables inside the restaurant.';
-- *** Order ***
CREATE TABLE RESTAURANT_ORDER (
  ID                   NUMBER(19) NOT NULL,
  MODIFICATION_COUNTER INTEGER NOT NULL,
  TABLE_ID             NUMBER(19) NOT NULL,
  TOTAL                DECIMAL(5, 2) NOT NULL,
  CREATION_DATE        TIMESTAMP NOT NULL,
  PAYMENT_DATE         TIMESTAMP,
  STATUS               VARCHAR2(10 CHAR) NOT NULL,
  CONSTRAINT PK_ORDER PRIMARY KEY(ID),
  CONSTRAINT FK_ORDER_TABLE_ID FOREIGN KEY(TABLE_ID) REFERENCES RESTAURANT_TABLE(ID)
);
COMMENT ON TABLE RESTAURANT_ORDER IS 'An order and bill at the restaurant.';
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>ATTENTION: Please note that <code>TABLE</code> and <code>ORDER</code> are reserved keywords in SQL and you should avoid using such keywords to prevent problems.</p>
</div>
</div>
<div class="sect2">
<h3 id="_data"><a class="anchor" href="#_data"></a>Data</h3>
<div class="paragraph">
<p>For insert, update, delete, etc. of data SQL scripts should additionally follow these guidelines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Inserts always with the same order of columns in blocks for each table.</p>
</li>
<li>
<p>Insert column values always starting with ID, MODIFICATION_COUNTER, [DTYPE, ] &#8230;&#8203;</p>
</li>
<li>
<p>List columns with fixed length values (boolean, number, enums, etc.) before columns with free text to support alignment of multiple insert statements</p>
</li>
<li>
<p>Pro Tip: Get familiar with column mode of advanced editors such as <code>notepad++</code> when editing large blocks of similar insert statements.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">INSERT INTO RESTAURANT_TABLE(ID, MODIFICATION_COUNTER, SEATS) VALUES (0, 1, 4);
INSERT INTO RESTAURANT_TABLE(ID, MODIFICATION_COUNTER, SEATS) VALUES (1, 1, 4);
INSERT INTO RESTAURANT_TABLE(ID, MODIFICATION_COUNTER, SEATS) VALUES (2, 1, 4);
INSERT INTO RESTAURANT_TABLE(ID, MODIFICATION_COUNTER, SEATS) VALUES (3, 1, 4);
INSERT INTO RESTAURANT_TABLE(ID, MODIFICATION_COUNTER, SEATS) VALUES (4, 1, 6);
INSERT INTO RESTAURANT_TABLE(ID, MODIFICATION_COUNTER, SEATS) VALUES (5, 1, 6);
INSERT INTO RESTAURANT_TABLE(ID, MODIFICATION_COUNTER, SEATS) VALUES (6, 1, 6);
INSERT INTO RESTAURANT_TABLE(ID, MODIFICATION_COUNTER, SEATS) VALUES (7, 1, 8);
INSERT INTO RESTAURANT_TABLE(ID, MODIFICATION_COUNTER, SEATS) VALUES (8, 1, 8);
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>See also <a href="guide-database-migration.html" class="xref page">Database Migrations</a>.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
